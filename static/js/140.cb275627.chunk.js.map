{"version":3,"file":"static/js/140.cb275627.chunk.js","mappings":"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","sources":["components/layout-enroll/style.ts","components/layout-enroll/index.tsx","hooks/useThrottle.ts","service/config/config.ts","service/request/request.ts","service/index.ts","service/api.ts"],"sourcesContent":["import styled from 'styled-components';\r\n\r\nexport const EnrollWrapper = styled.div`\r\n  text-align: right;\r\n  .area {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    height: 30px;\r\n    margin-bottom: 30px;\r\n    .search-form {\r\n      display: flex;\r\n\r\n      .submit-btn {\r\n        margin-left: 15px;\r\n      }\r\n    }\r\n  }\r\n  .tips {\r\n    display: inline-block;\r\n    margin: 20px 0;\r\n    padding: 10px 10px;\r\n    text-align: left;\r\n    border-radius: 10px;\r\n    color: #fff;\r\n    background-color: rgba(0, 21, 41, 0.7);\r\n    cursor: default;\r\n  }\r\n`;\r\n","import React, { useCallback, memo, useState, useEffect } from 'react';\nimport type { FC, ReactNode } from 'react';\nimport { searchType, userEnrollType } from '@/type';\nimport { Button, Form, Input, message, Table } from 'antd';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { EnrollWrapper } from './style';\nimport { getEnrollData, getSearchData } from '@/service/api';\nimport { ColumnsType } from 'antd/es/table';\nimport { useThrottle } from '@/hooks/useThrottle';\n\ninterface LayoutEnrollProps {\n  children?: ReactNode;\n}\n\nconst LayoutEnroll: FC<LayoutEnrollProps> = () => {\n  const [infoData, setInfoData] = useState<userEnrollType[]>([]);\n  const params = useParams();\n  const navigate = useNavigate();\n\n  // 进入用户详情页\n  const toUserDetail = useCallback((record: userEnrollType) => {\n    navigate(`/detail/${record.id}`);\n  }, []);\n\n  // 搜索\n  const searchFinish = useThrottle((value: searchType) => {\n    console.log(value);\n\n    if (value.username === undefined || value.username === '') {\n      reflashData();\n      return;\n    }\n    getSearchData(value).then((res) => {\n      if (res.code === 200 && res.data !== null) {\n        setInfoData([res.data]);\n        message.success(res.message);\n      } else {\n        setInfoData([]);\n        message.error(res.message + ',请输入全名');\n      }\n    });\n  }, 1000);\n\n  const columns: ColumnsType<userEnrollType> = [\n    {\n      title: '名字',\n      dataIndex: 'username',\n      key: 'username',\n      filterMode: 'tree'\n    },\n    {\n      title: '性别',\n      key: 'sex',\n      dataIndex: 'sex'\n    },\n    {\n      title: '学号',\n      key: 'studentId',\n      dataIndex: 'studentId'\n    },\n    {\n      title: '手机号码',\n      key: 'phone',\n      dataIndex: 'phone'\n    },\n    {\n      title: '学院',\n      key: 'college',\n      dataIndex: 'college'\n    },\n    {\n      title: '专业',\n      key: 'major',\n      dataIndex: 'major'\n    },\n    {\n      title: '状态',\n      key: 'status',\n      dataIndex: 'status'\n    },\n    {\n      title: '进入详情',\n      key: 'index',\n      render: (record: userEnrollType) => {\n        return (\n          <Button onClick={() => toUserDetail(record)} type=\"primary\">\n            进入详情\n          </Button>\n        );\n      }\n    }\n  ];\n  // 更新数据\n  useEffect(() => {\n    reflashData();\n  }, [params]);\n\n  const reflashData = () => {\n    getEnrollData(params.direction as string).then((res) => {\n      setInfoData(res.data);\n    });\n  };\n  return (\n    <EnrollWrapper>\n      <div className=\"area\">\n        <div className=\"search\">\n          <Form className=\"search-form\" onFinish={searchFinish}>\n            <Form.Item name=\"username\">\n              <Input placeholder=\"请输入完整的姓名\"></Input>\n            </Form.Item>\n\n            <Form.Item>\n              <Button type=\"primary\" htmlType=\"submit\" className=\"submit-btn\">\n                搜索\n              </Button>\n            </Form.Item>\n          </Form>\n        </div>\n        <div className=\"btn\">\n          <Button onClick={reflashData}>刷新数据</Button>\n        </div>\n      </div>\n      <Table columns={columns} dataSource={infoData} rowKey=\"id\" />\n    </EnrollWrapper>\n  );\n};\n\nexport default memo(LayoutEnroll);\n","import { useCallback, useEffect, useRef } from 'react';\r\n\r\ntype fnType = (...args: any) => any;\r\n\r\nexport function useThrottle(fn: fnType, delay: number, dep: any[] = []) {\r\n  const { current } = useRef<{ fn: fnType; timer?: NodeJS.Timeout | null }>({\r\n    fn,\r\n    timer: null\r\n  });\r\n  useEffect(\r\n    function () {\r\n      current.fn = fn;\r\n    },\r\n    [fn]\r\n  );\r\n\r\n  return useCallback(function f(this: any, ...args: any) {\r\n    if (!current.timer) {\r\n      current.timer = setTimeout(() => {\r\n        delete current.timer;\r\n      }, delay);\r\n      current.fn.call(this, ...args);\r\n    }\r\n  }, dep);\r\n}\r\n","export const BASE_URL = 'https://www.yidongmall.cn';\r\n\r\nexport const TIME_OUT = 10000;\r\n","import axios, { AxiosResponse, InternalAxiosRequestConfig } from 'axios';\nimport type { AxiosInstance, AxiosRequestConfig } from 'axios';\nimport type { eAxiosResponse } from './type';\nimport { refleshToken } from '../api';\nimport { TokenFunc } from '@/type';\n\n// 是否正在刷新的标记\nlet isRefreshing = false;\n// 重试队列，每一项将是一个待执行的函数形式\nlet requests: TokenFunc[] = [];\n\nclass Request {\n  // axios 实例\n  instance: AxiosInstance;\n\n  constructor(config: AxiosRequestConfig) {\n    this.instance = axios.create(config);\n    this.instance.interceptors.request.use(\n      (config: InternalAxiosRequestConfig) => {\n        if (localStorage.getItem('token') !== null) {\n          const token = localStorage.getItem('token') as string;\n          config.headers['token'] = `${token}`;\n        } else {\n          console.log('删除 token 了');\n          delete config.headers['Authorization'];\n        }\n        return config;\n      },\n      (err: AxiosResponse) => {\n        return err;\n      }\n    );\n\n    this.instance.interceptors.response.use(\n      (response) => {\n        // 获取code值\n        const { code, message } = response.data;\n        // 执行无痛刷新token\n        if (code === 500 && message === 'token无效!请重新登录!') {\n          const config = response.config;\n          if (!isRefreshing) {\n            isRefreshing = true;\n            return refleshToken()\n              .then((res) => {\n                const { data: token } = res;\n                // 设置token\n                localStorage.setItem('token', token);\n                console.log('token设置完毕');\n                config.headers['token'] = token;\n\n                // 已经刷新了token,将队列里的请求进行重试\n                requests.forEach((item) => item(token));\n                // 将重试队列置空\n                requests = [];\n                return this.instance.request(config);\n              })\n              .catch((res) => {\n                // 如果刷新token无效则直接回到登录页面\n                console.log('reflashtoken error = >', res);\n                window.location.href = '/Login';\n              })\n              .finally(() => {\n                isRefreshing = false;\n              });\n          } else {\n            // 此时代表正在刷新token,返回一个未执行resolve的promise\n            return new Promise((resolve) => {\n              requests.push((token) => {\n                config.headers['token'] = token;\n                // 发送请求\n                resolve(this.instance.request(config));\n              });\n            });\n          }\n        }\n        return response.data;\n      },\n      (err) => {\n        return Promise.reject(err);\n      }\n    );\n  }\n\n  request<T = eAxiosResponse>(config: AxiosRequestConfig) {\n    return this.instance.request<any, T>(config);\n  }\n  get<T = eAxiosResponse>(config: AxiosRequestConfig) {\n    return this.request<T>({ ...config, method: 'GET' });\n  }\n  post<T = eAxiosResponse>(config: AxiosRequestConfig) {\n    return this.request<T>({ ...config, method: 'POST' });\n  }\n  delete<T = eAxiosResponse>(config: AxiosRequestConfig) {\n    return this.request<T>({ ...config, method: 'DELETE' });\n  }\n}\n\nexport default Request;\n","import { BASE_URL, TIME_OUT } from './config/config';\r\nimport Request from './request/request';\r\n\r\nconst request = new Request({\r\n  baseURL: BASE_URL,\r\n  timeout: TIME_OUT\r\n});\r\n\r\nexport default request;\r\n","import { interviewTime, LoginProps, searchUserType } from '@/type';\r\nimport request from '.';\r\n\r\nexport function login(props: LoginProps) {\r\n  return request.post({\r\n    url: '/api/admin/login/pw',\r\n    params: props\r\n  });\r\n}\r\n\r\n// 获取报名情况\r\nexport function getEnrollData(direction: string) {\r\n  return request.get({\r\n    url: `/api/admin/orderBy/${direction}`\r\n  });\r\n}\r\n\r\nexport function getSearchData(params: searchUserType) {\r\n  return request.get({\r\n    url: `/api/admin/getUserInfoByName?username=${params.username}`\r\n  });\r\n}\r\n\r\n// 获取面试时间\r\nexport function getInterviewTime() {\r\n  return request.get({\r\n    url: '/api/admin/getAllTime'\r\n  });\r\n}\r\n// 根据方向获取面试时间\r\nexport function getInterviewTimeDirec(direction: number) {\r\n  return request.get({\r\n    url: `/api/admin/getAllTimeByDir/${direction}`\r\n  });\r\n}\r\n\r\nexport async function refreshToken() {\r\n  const username = window.localStorage.getItem('username') as string;\r\n  const password = window.localStorage.getItem('password') as string;\r\n\r\n  return login({ username, password }).then((res) => {\r\n    return res.data;\r\n  });\r\n}\r\n\r\n// 更改面试基本信息\r\nexport function updateInterviewInfo(props: interviewTime) {\r\n  return request.post({\r\n    url: '/api/admin/updateTime',\r\n    data: props\r\n  });\r\n}\r\n\r\n// 新增面试时间\r\nexport function addNewInterview(props: interviewTime) {\r\n  return request.post({\r\n    url: '/api/admin/addTime',\r\n    data: props\r\n  });\r\n}\r\n\r\n// 删除面试时间\r\nexport function deleteInterviewTime(id: number) {\r\n  return request.get({\r\n    url: `/api/admin/deleteTime/${id}`\r\n  });\r\n}\r\n\r\n// 获取某个用户的基本信息\r\nexport function getUserInfoById(id: number) {\r\n  return request.get({\r\n    url: `/api/admin/getUserInfoById`,\r\n    params: { id }\r\n  });\r\n}\r\n\r\nexport function refleshToken() {\r\n  const username = localStorage.getItem('username');\r\n  const password = localStorage.getItem('password');\r\n\r\n  return request.post({\r\n    url: '/api/admin/login/pw',\r\n    params: {\r\n      username,\r\n      password\r\n    }\r\n  });\r\n}\r\n\r\n// 查询当前面试时间是否有被预约`\r\nexport function getAppointSec(id: number) {\r\n  return request.get({\r\n    url: `/api/admin/ifSec/${id}`\r\n  });\r\n}\r\n\r\n// 查询多少分钟之前能预约\r\nexport function getPreRecruitTime() {\r\n  return request.get({\r\n    url: `/api/admin/getPreRecruitTime`\r\n  });\r\n}\r\n"],"names":["EnrollWrapper","styled","_templateObject","_taggedTemplateLiteral","LayoutEnroll","_useState","useState","_useState2","_slicedToArray","infoData","setInfoData","params","useParams","navigate","useNavigate","toUserDetail","useCallback","record","concat","id","searchFinish","fn","delay","dep","arguments","length","undefined","current","useRef","timer","useEffect","_current$fn","setTimeout","_len","args","Array","_key","call","apply","this","useThrottle","value","console","log","username","getSearchData","then","res","code","data","message","reflashData","columns","title","dataIndex","key","filterMode","render","_jsx","Button","onClick","type","children","getEnrollData","direction","_jsxs","className","Form","onFinish","name","Input","placeholder","htmlType","Table","dataSource","rowKey","memo","isRefreshing","requests","Request","config","_this","_classCallCheck","instance","axios","interceptors","request","use","localStorage","getItem","token","headers","err","response","_response$data","Promise","resolve","push","refleshToken","setItem","forEach","item","catch","window","location","href","finally","reject","_createClass","_objectSpread","method","baseURL","timeout","login","props","url","getInterviewTime","getInterviewTimeDirec","updateInterviewInfo","addNewInterview","deleteInterviewTime","getUserInfoById","password","getAppointSec","getPreRecruitTime"],"sourceRoot":""}