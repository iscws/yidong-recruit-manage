"use strict";(self.webpackChunkrecruit_manage=self.webpackChunkrecruit_manage||[]).push([[276],{2276:function(n,e,t){t.r(e),t.d(e,{default:function(){return C}});var i,r,a=t(3433),o=t(9439),u=t(2791),s=t(168),c=t(2360),l=c.ZP.div(i||(i=(0,s.Z)(["\n  .items-area {\n    position: relative;\n    display: flex;\n    flex-wrap: wrap;\n    flex: 1;\n    width: 100%;\n    padding: 20px 10px;\n  }\n  .items-header {\n    display: flex;\n    align-items: center;\n    margin: 0 25px 0 20px;\n    padding: 10px 10px;\n    background-color: #fff;\n    border-radius: 10px;\n    .timeForm {\n      width: 100%;\n      margin-bottom: -15px;\n      display: flex;\n      justify-content: space-around;\n      flex-direction: wrap;\n    }\n  }\n\n  .emptyArea {\n    margin-top: 30px;\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    padding: 40px;\n    width: 100%;\n    background-color: #fff;\n    .button {\n      width: 100px;\n      margin-top: 15px;\n    }\n  }\n"]))),d=t(1413),m=t(4165),f=t(5861),p=c.ZP.div(r||(r=(0,s.Z)(["\n  /* width: 33%; */\n  margin: 0 10px 15px 0;\n  min-width: 300px;\n  .inner {\n    position: relative;\n    padding: 20px;\n    background-color: #fff;\n    > div {\n      margin-bottom: 10px;\n    }\n    .tips {\n      position: absolute;\n      left: 0px;\n      color: red;\n      font-size: 8px;\n    }\n    .delete {\n      position: absolute;\n      top: 5px;\n      right: 5px;\n      padding: 5px;\n      border-radius: 3px;\n      transition: all ease 0.2s;\n      cursor: pointer;\n\n      &:hover {\n        background-color: rgba(0, 0, 0, 0.2);\n      }\n    }\n\n    .btnArea {\n      display: flex;\n      justify-content: space-between;\n    }\n  }\n"]))),h=t(7027),g=t(8185),x=t(1717),Z=t(7943),v=t(2835),j=t(4422),y=t(7309),b=t(9228),w=t(1082),k=t(2622),D=t(7892),T=t.n(D),P=t(8618),I=t(7689),q=t(184),N=function(n){var e,t=n.infoData,i=n.fetchData,r=(0,I.UO)(),a=(0,u.useState)({innerData:t,isAppoint:!1,isDefault:null!==(e=t.isdefalut)&&void 0!==e&&e}),s=(0,o.Z)(a,2),c=s[0],l=s[1],D=function(){var n=(0,f.Z)((0,m.Z)().mark((function n(){var e;return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.isDefault){n.next=7;break}return n.next=3,(0,P.nF)(t.id);case 3:if(200===(e=n.sent).code){n.next=7;break}return h.ZP.error(e.message),n.abrupt("return");case 7:h.ZP.success("\u5220\u9664\u6210\u529f"),i();case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,u.useEffect)((function(){!c.isDefault&&(0,P.zN)(t.id).then((function(n){l((0,d.Z)((0,d.Z)({},c),{},{isAppoint:!n.data}))}))}),[]),(0,u.useEffect)((function(){l((0,d.Z)((0,d.Z)({},c),{},{innerData:t}))}),[t]),(0,q.jsx)(p,{children:(0,q.jsxs)("div",{className:"inner",children:[(0,q.jsxs)(g.Z,{name:"interviewForm",onFinish:function(n){var e={id:t.id,location:n.location,direction:Number(r.direction),quota:n.quota,startTime:n.date.format("YYYY-MM-DD")+" "+n.startTime.format("HH:mm:ss"),endTime:n.date.format("YYYY-MM-DD")+" "+n.endTime.format("HH:mm:ss")};c.isDefault?(0,P.iX)(e).then((function(n){200===n.code?(t.id=n.data,h.ZP.success("\u6dfb\u52a0\u6210\u529f"),i()):h.ZP.error(n.message)})):(0,P.lf)(e).then((function(n){200===n.code?(h.ZP.success(n.message),i()):h.ZP.error(n.message)}))},children:[(0,q.jsx)(g.Z.Item,{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u65e5\u671f"}],name:"date",label:"\u65e5\u671f",initialValue:T()(c.innerData.startTime),children:(0,q.jsx)(x.Z,{format:"YYYY-MM-DD"})}),(0,q.jsx)(g.Z.Item,{name:"startTime",label:"\u5f00\u59cb\u65f6\u95f4",initialValue:T()(c.innerData.startTime),rules:[{required:!0,message:"\u8bf7\u586b\u5199\u65f6\u95f4"}],children:(0,q.jsx)(Z.Z,{format:"HH:mm",disabled:c.isAppoint})}),(0,q.jsx)(g.Z.Item,{name:"endTime",label:"\u7ed3\u675f\u65f6\u95f4",initialValue:T()(c.innerData.endTime),rules:[{required:!0,message:"\u8bf7\u586b\u5199\u65e5\u671f"}],children:(0,q.jsx)(Z.Z,{format:"HH:mm"})}),(0,q.jsx)(g.Z.Item,{name:"quota",label:"\u603b\u540d\u989d",initialValue:c.innerData.quota,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u540d\u989d"}],children:(0,q.jsx)(v.Z,{type:"number"})}),(0,q.jsx)(g.Z.Item,{name:"location",label:"\u5730\u70b9",initialValue:c.innerData.location,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u5730\u70b9"}],children:(0,q.jsx)(v.Z,{})}),(0,q.jsx)(g.Z.Item,{label:"\u65b9\u5411",initialValue:c.innerData.direction,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u65b9\u5411"}],children:(0,q.jsxs)(j.ZP.Group,{value:c.innerData.direction,children:[(0,q.jsx)(j.ZP,{value:1,children:" \u524d\u7aef "}),(0,q.jsx)(j.ZP,{value:2,children:" \u540e\u7aef "})]})}),(0,q.jsx)(g.Z.Item,{children:(0,q.jsxs)("div",{className:"btnArea",children:[(0,q.jsx)(y.ZP,{type:"primary",htmlType:"submit",children:c.isDefault?"\u786e\u5b9a\u65b0\u5efa":"\u66f4\u6539"}),(0,q.jsx)(b.Z,{content:"\u5269\u4f59\u540d\u989d\uff1a"+c.innerData.spareQuota,trigger:"click",children:(0,q.jsx)(y.ZP,{children:"\u67e5\u770b\u66f4\u591a"})})]})})]}),(0,q.jsx)(w.Z,{title:"\u5220\u9664\u9762\u8bd5\u65f6\u95f4",description:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4e2a\u9762\u8bd5\u65f6\u95f4\u6bb5\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onConfirm:D,children:(0,q.jsx)("div",{className:"delete",children:(0,q.jsx)(k.Z,{style:{fontSize:"16px",color:"red"}})})})]})})},S=(0,u.memo)(N),Y=t(4664),A=t(5076),E=t(9286),H=t(1687),C=function(){var n=(0,u.useState)([]),e=(0,o.Z)(n,2),t=e[0],i=e[1],r=(0,u.useState)(0),s=(0,o.Z)(r,2),c=s[0],d=s[1],m=(0,I.UO)(),f=(0,u.useCallback)((function(){var n=new Date;i([].concat((0,a.Z)(t),[{id:n.getTime(),startTime:n.toLocaleString(),endTime:n.toLocaleString(),quota:"",location:"",spareQuota:0,isdefalut:!0,direction:Number(m.direction)}])),setTimeout((function(){window.scrollTo(0,document.documentElement.scrollHeight)}),50)}),[t]),p=(0,H.f)((function(n){(0,P.CI)(Number(n.time)).then((function(n){200===n.code?h.ZP.success(n.message):h.ZP.error(n.message)}))}),200),x=function(){(0,P.YG)(Number(m.direction)).then((function(n){i(n.data)}))};return(0,u.useEffect)((function(){x(),(0,P.WU)().then((function(n){200===n.code&&d(n.data)}))}),[m]),(0,q.jsxs)(l,{children:[(0,q.jsx)("div",{className:"items-header",children:0!==c&&(0,q.jsxs)(g.Z,{name:"timeForm",onFinish:p,className:"timeForm",children:[(0,q.jsx)(g.Z.Item,{label:"\u9762\u8bd5\u5f00\u59cb\u524d\u591a\u4e45\u80fd\u9884\u7ea6\uff08\u5355\u4f4d\uff1a\u5206\u949f\uff09",name:"time",initialValue:c,children:(0,q.jsx)(v.Z,{type:"number"})}),(0,q.jsx)(g.Z.Item,{children:(0,q.jsx)(y.ZP,{htmlType:"submit",type:"primary",children:"\u63d0\u4ea4"})})]})}),(0,q.jsx)("div",{className:"items-area",children:0!==t.length?t.map((function(n){return(0,q.jsx)(S,{infoData:n,fetchData:x},n.id)})):(0,q.jsx)("div",{className:"emptyArea",children:(0,q.jsx)(Y.Z,{imageStyle:{height:120},description:(0,q.jsx)("span",{style:{color:"#94979e"},children:"\u4ec0\u4e48\u90fd\u6ca1\u6709~"}),children:(0,q.jsx)(y.ZP,{type:"primary",onClick:f,children:"\u6dfb\u52a0\u9762\u8bd5\u65f6\u95f4"})})})}),(0,q.jsx)("div",{className:"items-tips",children:(0,q.jsx)(A.Z,{type:"primary",style:{right:24},icon:(0,q.jsx)(E.Z,{}),tooltip:(0,q.jsx)("div",{children:"\u65b0\u589e\u9762\u8bd5\u65f6\u95f4"}),onClick:f})})]})}},1687:function(n,e,t){t.d(e,{f:function(){return r}});var i=t(2791);function r(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=(0,i.useRef)({fn:n,timer:null}).current;return(0,i.useEffect)((function(){r.fn=n}),[n]),(0,i.useCallback)((function(){if(!r.timer){var n;r.timer=setTimeout((function(){delete r.timer}),e);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];(n=r.fn).call.apply(n,[this].concat(i))}}),t)}},8618:function(n,e,t){t.d(e,{iX:function(){return h},IH:function(){return I},nF:function(){return g},CI:function(){return y},zN:function(){return v},nI:function(){return q},JT:function(){return d},YG:function(){return f},$Y:function(){return k},WU:function(){return j},y7:function(){return b},Im:function(){return m},sz:function(){return x},x4:function(){return l},Gm:function(){return D},Jv:function(){return T},EP:function(){return Z},d:function(){return w},ij:function(){return P},lf:function(){return p}});var i=t(1413),r=t(5671),a=t(3144),o=t(1243),u=!1,s=[],c=new(function(){function n(e){var t=this;(0,r.Z)(this,n),this.instance=void 0,this.instance=o.Z.create(e),this.instance.interceptors.request.use((function(n){if(null!==localStorage.getItem("token")){var e=localStorage.getItem("token");n.headers.token="".concat(e)}else console.log("\u5220\u9664 token \u4e86"),delete n.headers.Authorization;return n}),(function(n){return n})),this.instance.interceptors.response.use((function(n){var e=n.data,i=e.code,r=e.message;if(500===i&&"token\u65e0\u6548!\u8bf7\u91cd\u65b0\u767b\u5f55!"===r){var a=n.config;return u?new Promise((function(n){s.push((function(e){a.headers.token=e,n(t.instance.request(a))}))})):(u=!0,Z().then((function(n){var e=n.data;return localStorage.setItem("token",e),console.log("token\u8bbe\u7f6e\u5b8c\u6bd5"),a.headers.token=e,s.forEach((function(n){return n(e)})),s=[],t.instance.request(a)})).catch((function(n){console.log("reflashtoken error = >",n),window.location.href="/Login"})).finally((function(){u=!1})))}return n.data}),(function(n){return Promise.reject(n)}))}return(0,a.Z)(n,[{key:"request",value:function(n){return this.instance.request(n)}},{key:"get",value:function(n){return this.request((0,i.Z)((0,i.Z)({},n),{},{method:"GET"}))}},{key:"post",value:function(n){return this.request((0,i.Z)((0,i.Z)({},n),{},{method:"POST"}))}},{key:"delete",value:function(n){return this.request((0,i.Z)((0,i.Z)({},n),{},{method:"DELETE"}))}},{key:"put",value:function(n){return this.request((0,i.Z)((0,i.Z)({},n),{},{method:"PUT"}))}}]),n}())({baseURL:"https://www.yidongmall.cn",timeout:1e4});function l(n){return c.post({url:"/api/admin/login/pw",params:n})}function d(n){return c.get({url:"/api/admin/orderBy/".concat(n)})}function m(n){return c.get({url:"/api/admin/getUserInfoByName?username=".concat(n.username)})}function f(n){return c.get({url:"/api/admin/getAllTimeByDir/".concat(n)})}function p(n){return c.put({url:"/api/admin/interview",data:n})}function h(n){return c.post({url:"/api/admin/interview",data:n})}function g(n){return c.delete({url:"/api/admin/interview/".concat(n)})}function x(n){return c.get({url:"/api/admin/getUserInfoById",params:{id:n}})}function Z(){var n=localStorage.getItem("username"),e=localStorage.getItem("password");return c.post({url:"/api/admin/login/pw",params:{username:n,password:e}})}function v(n){return c.get({url:"/api/admin/ifSec/".concat(n)})}function j(){return c.get({url:"/api/admin/getPreRecruitTime"})}function y(n){return c.put({url:"/api/admin/changeRecruitTime/".concat(n)})}function b(n){return c.get({url:"/api/admin/getThisTime/".concat(n)})}function w(n,e){return c.put({url:"/api/admin/setAssess/".concat(n),params:{assess:e}})}function k(n){return c.get({url:"/api/admin/getNow/".concat(n)})}function D(n){return c.get({url:"/api/admin/getNext/".concat(n)})}function T(n){return c.post({url:"/api/admin/push/interview/".concat(n)})}function P(n,e){return c.put({url:"/api/admin/setStatus/".concat(n,"/").concat(e)})}function I(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u6682\u4e0d\u652f\u6301\u62a5\u540d";return c.put({url:"/api/admin/page/display",data:{isDisplay:n,message:e}})}function q(){return c.get({url:"/api/recruit/display"})}}}]);
//# sourceMappingURL=276.025406d0.chunk.js.map